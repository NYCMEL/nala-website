<link href="pager/mtk-pager.css" rel="stylesheet">

<!-- mtk-pager Container -->
<pager id="mtk-pager" />

<script src="pager/mtk-pager.config.js"></script>
<script src="pager/mtk-pager.js"></script>

<script>
 // INITIAL PAGE
 wc.getSession(function (loggedIn, session, err) {
     if (err) return;
     
     if (wc.working) {
	 wc.timeout(function(){
	     MTKMsgs.show({
		 type: 'success',
		 icon: 'check_circle',
		 message: 'Loading in progress. Please wait...',
		 buttons: [],
		 closable: false, // No X button
		 timer: 3, // Auto-close after 5 seconds
		 block: true
	     });
	 }, 300, 1);
     }

     wc.configure = session;

     alert("========: " +  JSON.stringify(session.user));

     if (loggedIn) {
	 wc.log('IS LOGGED IN');
	 mtk_pager.show('dashboard');
	 
	 // SHOW PUBLIC HEADER
	 $(".app-header").hide(function() {
	     $("#header-private").show();
	 });
     } else {
	 wc.log('IS NOT LOGGED IN');
	 mtk_pager.show('home');
	 
	 // SHOW PUBLIC HEADER
	 $(".app-header").hide(function() {
	     $("#header-public").show();
	 });
     }
 });

 function checkFooter() {
     const footer = document.getElementById("page-footer");
     if (!footer) return;

     function adjustFooter() {
	 const docHeight = document.documentElement.scrollHeight;
	 const viewportHeight = window.innerHeight;

	 if (docHeight <= viewportHeight) {
	     footer.style.position = "fixed";
	     footer.style.bottom = "0";
	     footer.style.left = "0";
	     footer.style.width = "100%";
	 } else {
	     footer.style.position = "static";
	 }
     }

     // Run after layout is truly ready
     window.addEventListener("load", adjustFooter);
     window.addEventListener("resize", adjustFooter);

     // Extra safety: re-run after fonts/images
     setTimeout(adjustFooter, 50);
 }
</script>
