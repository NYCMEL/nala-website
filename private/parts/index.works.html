<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MTK-parts</title>

	<!-- Bootstrap 5 CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Component SCSS compiled to CSS -->
	<style>
	 #MTK-parts {
	     .mtk-card {
		 cursor: pointer;
		 width: 100%;
		 padding-top: 100%;
		 position: relative;
		 perspective: 1000px;
	     }
	     .mtk-card .card-content {
		 position: absolute;
		 top: 0;
		 left: 0;
		 right: 0;
		 bottom: 0;
		 background-color: #ffffff;
		 border-radius: 16px;
		 box-shadow: 0 4px 16px rgba(0,0,0,0.2);
		 display: flex;
		 align-items: center;
		 justify-content: center;
		 text-align: center;
		 padding: 1rem;
		 transition: transform 0.4s ease, box-shadow 0.4s ease;
	     }
	     .mtk-card .card-content h5 {
		 margin: 0;
		 font-size: 1.1rem;
		 font-weight: 600;
	     }
	     .mtk-card:hover .card-content {
		 transform: translateY(-8px) scale(1.05);
		 box-shadow: 0 8px 24px rgba(0,0,0,0.3);
	     }
	     .mtk-card.locked .card-content {
		 background-color: #f0f0f0;
		 color: #999999;
		 cursor: not-allowed;
	     }
	 }
	</style>
    </head>
    <body>
	<div class="container my-5">
	    <h2 class="mb-4">MTK-parts Component</h2>
	    <div id="MTK-parts" class="row g-3"></div>
	</div>

	<!-- PubSub JS (minimal version) -->
	<script>
	 window._pubsub = {
	     events: {},
	     publish: function(event, data) {
		 (this.events[event] || []).forEach(fn => fn(data));
	     },
	     subscribe: function(event, fn) {
		 if (!this.events[event]) this.events[event] = [];
		 this.events[event].push(fn);
	     }
	 };
	</script>

	<!-- Lessons JSON -->
	<script>
	 window.app = {
	     lessons: {
		 parts: [
		     { title: "Part I Title", access: true },
		     { title: "Part II Title", access: false },
		     { title: "Part III Title", access: false },
		     { title: "Part IV Title", access: false },
		     { title: "Part V Title", access: false },
		     { title: "Part VI Title", access: false },
		     { title: "Part VII Title", access: false },
		     { title: "Part VIII Title", access: false },
		     { title: "Part IX Title", access: false },
		     { title: "Part X Title", access: false },
		     { title: "Part XI Title", access: false },
		     { title: "Part XII Title", access: false },
		     { title: "Part XIII Title", access: false }
		 ]
	     }
	 };
	</script>

	<!-- MTK-parts JS -->
	<script>
	 document.addEventListener("DOMContentLoaded", function () {
	     const container = document.getElementById("MTK-parts");
	     if (!container || !window.app?.lessons?.parts) return;
	     const parts = window.app.lessons.parts;

	     parts.forEach((part, index) => {
		 const col = document.createElement("div");
		 col.className = "col-md-3";

		 const card = document.createElement("div");
		 card.className = `mtk-card ${part.access ? "" : "locked"}`;

		 const content = document.createElement("div");
		 content.className = "card-content";

		 const title = document.createElement("h5");
		 title.textContent = part.title;

		 content.appendChild(title);
		 card.appendChild(content);
		 col.appendChild(card);
		 container.appendChild(col);

		 if (part.access) {
		     card.addEventListener("click", () => {
			 window._pubsub.publish("MTK-parts:click", { index, part });
			 alert("Clicked: " + part.title);
		     });
		 }
	     });
	 });
	</script>
    </body>
</html>
